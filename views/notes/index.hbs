<!-- Notes Page -->

<h1>My Notes</h1>

<!-- Link to add a new note -->
<a href="/notes/add" class="btn">Create New Note</a>

<!-- Loop through all notes -->
{{#each notes}}
  <div class="note">
    <!-- Note title -->
    <h3>{{this.title}}</h3>

    <!-- Note body -->
    <p>{{this.body}}</p>

    <!-- Note creation date -->
    <small>{{this.createdAt}}</small><br>

    <!-- Loop through uploaded files -->
    {{#each this.files}}
      <!-- Check if the file is a video -->
      {{#if (this.includes ".mp4")}}
        <video width="300" controls>
          <source src="/uploads/{{this}}" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      {{else if (this.includes ".mov")}}
        <video width="300" controls>
          <source src="/uploads/{{this}}" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      {{else if (this.includes ".avi")}}
        <video width="300" controls>
          <source src="/uploads/{{this}}" type="video/mp4">
          Your browser does not support the video tag.
        </video>
      {{else}}
        <!-- If not a video, display as image -->
        <img src="/uploads/{{this}}" width="300">
      {{/if}}
    {{/each}}

    <!-- Form to delete note -->
    <form action="/notes/{{this._id}}/delete" method="POST">
      <button type="submit">Delete</button>
    </form>

    <!-- Link to edit note -->
    <a href="/notes/{{this._id}}/edit" class="btn">Edit</a>
  </div>
{{/each}}
